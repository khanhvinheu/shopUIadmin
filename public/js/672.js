"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[672],{525:(t,e,a)=>{a.d(e,{Z:()=>d});var s=a(538),r=a(9669),i=a.n(r),n=a(2346),o=a(9755),l=a.n(o),c={init:function(){s.default.use(n.Z,i()),s.default.axios.defaults.baseURL="http://127.0.0.1:9999/"},setHeader:function(){var t=AuthService.getToken();t&&(s.default.axios.defaults.headers.common.Authorization="Bearer ".concat(t)),l().ajaxSetup({headers:{"X-CSRF-TOKEN":l()('meta[name="csrf-token"]').attr("content"),Authorization:"Bearer ".concat(t)}})},query:function(t,e){return s.default.axios.get(t,e).catch((function(t){throw t&&t.response&&401===t.response.status&&c.sessionExpire(),new Error("[RWV] ApiService ".concat(t))}))},get:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s.default.axios.get("".concat(t,"/").concat(e)).catch((function(t){throw t&&t.response&&401===t.response.status&&c.sessionExpire(),new Error("[RWV] ApiService ".concat(t))}))},post:function(t,e){return s.default.axios.post("".concat(t),e).catch((function(t){throw t&&t.response&&401===t.response.status&&c.sessionExpire(),new Error("[RWV] ApiService ".concat(t))}))},update:function(t,e,a){return s.default.axios.put("".concat(t,"/").concat(e),a).catch((function(t){throw t&&t.response&&401===t.response.status&&c.sessionExpire(),new Error("[RWV] ApiService ".concat(t))}))},put:function(t,e){return s.default.axios.put("".concat(t),e).catch((function(t){throw t&&t.response&&401===t.response.status&&c.sessionExpire(),new Error("[RWV] ApiService ".concat(t))}))},delete:function(t){return s.default.axios.delete(t).catch((function(t){throw t&&t.response&&401===t.response.status&&c.sessionExpire(),new Error("[RWV] ApiService ".concat(t))}))}};const d=c},9725:(t,e,a)=>{a.d(e,{Z:()=>i});var s=a(3645),r=a.n(s)()((function(t){return t[1]}));r.push([t.id,".custom-tree-node{align-items:center;display:flex;flex:1;font-size:14px;justify-content:space-between;padding-right:8px}.label__form{font-size:13px}",""]);const i=r},4672:(t,e,a)=>{a.r(e),a.d(e,{default:()=>m});var s=a(7757),r=a.n(s),i=a(525);function n(t,e,a,s,r,i,n){try{var o=t[i](n),l=o.value}catch(t){return void a(t)}o.done?e(l):Promise.resolve(l).then(s,r)}function o(t){return function(){var e=this,a=arguments;return new Promise((function(s,r){var i=t.apply(e,a);function o(t){n(i,s,r,o,l,"next",t)}function l(t){n(i,s,r,o,l,"throw",t)}o(void 0)}))}}const l={watch:{filterDataCategorys:function(t){this.$refs.tree.filter(t)}},data:function(){return{idUpdate:"",rules:{title:[{required:!0,message:"Vui lòng không bỏ trống",trigger:"blur"}],level:[{required:!0,message:"Vui lòng không bỏ trống",trigger:"change"}]},data:[],filterDataCategorys:"",listCategoryParent:[],defaultProps:{children:"children",label:"label"},options:[{value:1,label:"Level 1"},{value:2,label:"Level 2"},{value:3,label:"Level 3"},{value:4,label:"Level 4"},{value:5,label:"Level 5"}],formData:{title:"",idParent:"",icon:"",level:"",hidden:"1"}}},mounted:function(){this.getList()},methods:{filterNode:function(t,e){return!t||-1!==e.title.indexOf(t)},resetForm:function(t){this.$refs[t].resetFields()},getList:function(){var t=this;i.Z.query("/api/admin/categorys",{params:{type:"treeData"}}).then((function(e){var a=e.data;t.data=a.data}))},getDataParent:function(t,e){var a=this;return o(r().mark((function s(){var i;return r().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return(i=a).listCategoryParent=[],!e&&(i.formData.idParent=""),s.next=5,axios({method:"get",url:"/api/admin/categorys",params:{type:"data"}}).then((function(e){e.data.success&&e.data.data.length>0&&e.data.data.map((function(e){e.level==i.formData.level-1&&(i.listCategoryParent.push(e),e.id==t&&(i.formData.idParent=t))}))}));case 5:case"end":return s.stop()}}),s)})))()},getDetail:function(t){var e=this;return o(r().mark((function a(){var s,i;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(s=e).listCategoryParent=[],s.idUpdate=t,a.next=5,axios({method:"get",url:"/api/admin/categorys/detail/"+t}).then((function(t){var e=t.data;if(e.success){var a=e.data;s.formData.title=a.title,s.formData.level=a.level,i=a.idParent,s.formData.icon=a.icon,s.formData.hidden=a.hidden.toString()}}));case 5:return a.next=7,s.getDataParent(i,!0);case 7:case"end":return a.stop()}}),a)})))()},deleteCategory:function(t){var e=this;axios({method:"post",url:"/api/admin/categorys/delete/"+t,responseType:"stream"}).then((function(t){t.data.success?(e.$notify({title:"Success",message:t.data.mess,type:"success"}),e.getList()):e.$notify({title:"Error",message:t.data.mess,type:"error"})}))},create:function(){var t=this,e=this;this.$refs.formData.validate((function(a){if(!a)return!1;axios({method:"post",url:"/api/admin/categorys/create",data:t.formData}).then((function(t){t.data.success?(e.$notify({title:"Success",message:t.data.mess,type:"success"}),e.resetForm("formData"),e.getList()):e.$notify({title:"Error",message:t.data.mess,type:"error"})}))}))},update:function(){var t=this,e=this;this.$refs.formData.validate((function(a){if(!a)return!1;axios({method:"post",url:"/api/admin/categorys/update/"+e.idUpdate,data:t.formData}).then((function(t){t.data.success?(e.$notify({title:"Success",message:t.data.mess,type:"success"}),e.resetForm("formData"),e.idUpdate="",e.getList()):e.$notify({title:"Error",message:t.data.mess,type:"error"})}))}))}}},c=l;var d=a(3379),u=a.n(d),f=a(9725),p={insert:"head",singleton:!1};u()(f.Z,p);f.Z.locals;const m=(0,a(1900).Z)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"card card-default"},[t._m(0),t._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"row",staticStyle:{display:"flex","flex-wrap":"nowrap"}},[a("el-input",{attrs:{placeholder:"Nhập kí tự cần tìm kiếm danh mục"},model:{value:t.filterDataCategorys,callback:function(e){t.filterDataCategorys=e},expression:"filterDataCategorys"}}),t._v(" "),a("el-button",{staticClass:"ml-2",attrs:{type:"primary"},on:{click:function(e){t.idUpdate="",t.resetForm("formData")}}},[a("i",{staticClass:"el-icon-plus"}),t._v(" Thêm mới")])],1),t._v(" "),a("el-divider"),t._v(" "),a("el-tree",{directives:[{name:"show",rawName:"v-show",value:t.data,expression:"data"}],ref:"tree",attrs:{"empty-text":"Không tìm thấy !","filter-node-method":t.filterNode,data:t.data,"show-checkbox":!1,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},scopedSlots:t._u([{key:"default",fn:function(e){e.node;var s=e.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[t._v(t._s(s.title))]),t._v(" "),a("span",[a("el-button",{staticStyle:{color:"green"},attrs:{type:"text",size:"mini"},on:{click:function(){return t.getDetail(s.id)}}},[a("i",{staticClass:"el-icon-edit"}),t._v(" Cập nhật\n                    ")]),t._v(" "),a("el-divider",{attrs:{direction:"vertical"}}),t._v(" "),a("el-popconfirm",{attrs:{"confirm-button-text":"Xóa","cancel-button-text":"Không",title:"Bạn có chắc chắn muốn xóa danh mục *"+s.title+"* không ?"},on:{confirm:function(){return t.deleteCategory(s.id)}}},[a("el-button",{staticStyle:{color:"red"},attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[a("i",{staticClass:"el-icon-delete"}),t._v(" Xóa")])],1)],1)])}}])})],1)])])])]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"card card-default"},[t._m(1),t._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("el-form",{ref:"formData",staticClass:"demo-ruleForm",attrs:{"label-position":"right",model:t.formData,rules:t.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"Tên danh mục",prop:"title"}},[a("div",{staticClass:"form-group"},[a("el-input",{attrs:{"validate-event":"",placeholder:"Nhập tên danh mục"},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1)]),t._v(" "),a("el-form-item",{attrs:{label:"Level",prop:"level"}},[a("div",{staticClass:"form-group"},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"large",placeholder:"Chọn cấp danh mục"},on:{change:function(e){return t.getDataParent(null,!1)}},model:{value:t.formData.level,callback:function(e){t.$set(t.formData,"level",e)},expression:"formData.level"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value,disabled:t.disabled}})})),1)],1)]),t._v(" "),a("el-form-item",{attrs:{label:"Danh mục cha",prop:"idParent"}},[a("div",{staticClass:"form-group"},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"large",placeholder:"Chọn danh mục cha"},model:{value:t.formData.idParent,callback:function(e){t.$set(t.formData,"idParent",e)},expression:"formData.idParent"}},t._l(t.listCategoryParent,(function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1)]),t._v(" "),a("el-form-item",{attrs:{label:"Icon",prop:"icon"}},[a("div",{staticClass:"form-group"},[a("el-input",{attrs:{placeholder:"Nhập icon có dạng fa fa-nameicon"},model:{value:t.formData.icon,callback:function(e){t.$set(t.formData,"icon",e)},expression:"formData.icon"}})],1)]),t._v(" "),a("el-form-item",{attrs:{label:"Hiển thị/ ẩn",prop:"hidden"}},[a("div",{staticClass:"form-group"},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.formData.hidden,callback:function(e){t.$set(t.formData,"hidden",e)},expression:"formData.hidden"}})],1)])],1)],1)])]),t._v(" "),a("div",{staticClass:"card-footer"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.idUpdate,expression:"!idUpdate"}],attrs:{type:"success"},on:{click:t.create}},[a("i",{staticClass:"el-icon-plus"}),t._v(" Lưu lại")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.idUpdate,expression:"idUpdate"}],attrs:{type:"success"},on:{click:t.update}},[a("i",{staticClass:"el-icon-edit"}),t._v(" Lưu lại")]),t._v(" "),a("el-button",[t._v("Đóng")])],1)])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header",staticStyle:{"background-color":"rgb(0,0,0,0.1)"}},[a("h3",{staticClass:"card-title"},[t._v("DANH MỤC SẢN PHẨM")]),t._v(" "),a("div",{staticClass:"card-tools"},[a("button",{staticClass:"btn btn-tool",attrs:{type:"button","data-card-widget":"collapse"}},[a("i",{staticClass:"fas fa-minus"})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header",staticStyle:{"background-color":"rgb(0,0,0,0.1)"}},[a("h3",{staticClass:"card-title"},[t._v("THÔNG TIN DANH MỤC")]),t._v(" "),a("div",{staticClass:"card-tools"},[a("button",{staticClass:"btn btn-tool",attrs:{type:"button","data-card-widget":"collapse"}},[a("i",{staticClass:"fas fa-minus"})])])])}],!1,null,null,null).exports}}]);